<div align="center">

<img src=".github/logo.png" alt="PhoneSync" width="128" height="128">

# PhoneSync

**안드로이드 폰 데이터를 엑셀로. 내 방식대로.**

[English](README.md)

---

</div>

## 문제

당신의 폰에는 수년간의 연락처, 문자, 통화 기록이 있습니다. 이 데이터를 꺼내는 데 이런 게 필요할 이유가 없습니다:

- 믿을 수 없는 클라우드 계정
- 비싼 백업 소프트웨어
- ADB 명령어 같은 기술 지식
- 개인 데이터를 제3자 서버로 전송

## 해결책

PhoneSync는 안드로이드 폰과 컴퓨터 사이에 **직접적이고 암호화된 연결**을 로컬 WiFi 네트워크로 만듭니다. 클라우드 없음. 계정 없음. 중개자 없음.

```
┌─────────────┐        WiFi (TLS)         ┌─────────────┐
│  안드로이드  │ ◄──────────────────────► │   데스크톱   │
│   (서버)    │      PIN 인증              │   (클라이언트) │
└─────────────┘                            └─────────────┘
                                                  │
                                                  ▼
                                           ┌─────────────┐
                                           │    .xlsx    │
                                           │    내보내기  │
                                           └─────────────┘
```

## 이런 분들께 추천합니다

| PhoneSync가 필요한 경우 | 굳이 필요 없는 경우 |
|----------------------|-------------------|
| 폰 데이터의 로컬 백업을 원함 | Google/삼성 백업으로 충분함 |
| 분석을 위해 엑셀 형식이 필요함 | 연락처 동기화만 필요함 |
| 클라우드 백업 서비스를 신뢰하지 않음 | 제3자 접근이 괜찮음 |
| 폰 교체 시 기록을 남기고 싶음 | 문자 기록이 필요했던 적 없음 |
| 한국 휴대폰 번호 (010-xxxx)를 다룸 | 해당 없음 |

## 기능

### 내보내기 가능한 데이터

| 데이터 종류 | 필드 |
|-----------|------|
| **연락처** | 이름, 모든 전화번호, 이메일 |
| **문자 (SMS)** | 발신/수신자, 메시지 내용, 시간, 유형 (발신/수신) |
| **통화 기록** | 번호, 통화 시간, 시간, 유형 (수신/발신/부재중) |

### 스마트 필터링

- **한국 휴대폰만**: 010-xxxx-xxxx 번호만 필터링 (유선전화, 국제전화 제외)
- **날짜 범위**: 특정 날짜 이후의 문자/통화만 내보내기
- **선택적 내보내기**: 포함할 데이터 종류 선택

### 보안

- **PIN 페어링**: 6자리 코드, 5분 후 만료
- **TLS 암호화**: 모든 데이터 HTTPS로 전송
- **로컬 네트워크**: WiFi를 벗어나지 않음
- **데이터 미저장**: 안드로이드 앱은 내보낸 데이터를 저장하지 않음

## 빠른 시작

### 요구 사항

- **안드로이드 폰** (API 23+ / Android 6.0+) — iOS는 지원하지 않음
- macOS 또는 Windows 컴퓨터
- 두 기기가 같은 WiFi 네트워크에 연결

### 설정

1. **안드로이드 앱 설치**
2. **데스크톱 앱 설치**
3. **권한 허용** — 안드로이드에서 연락처, 문자, 전화 권한 허용
4. **PIN 입력** — 폰에 표시된 PIN을 데스크톱 앱에 입력
5. **내보내기** — 원하는 항목 선택 후 엑셀로 저장

## 아키텍처

```
jljm-phonesync/
├── apps/
│   ├── android_provider/     # Flutter 안드로이드 앱 (HTTPS 서버)
│   │   ├── lib/
│   │   │   ├── services/     # 연락처, SMS, 통화 추출
│   │   │   ├── providers/    # Riverpod 상태 관리
│   │   │   └── screens/      # UI
│   │   └── ...
│   │
│   └── desktop_client/       # Flutter 데스크톱 앱 (HTTPS 클라이언트)
│       ├── lib/
│       │   ├── services/     # mDNS 검색, 동기화, 내보내기
│       │   ├── providers/    # 세션, 내보내기 상태
│       │   └── screens/      # 검색, 페어링, 홈
│       └── ...
```

### 기술 스택

- **프레임워크**: Flutter 3.x
- **상태 관리**: Riverpod 3.x
- **서버**: Shelf (자체 서명 TLS)
- **검색**: mDNS/DNS-SD (`nsd` 패키지)
- **내보내기**: `excel` 패키지로 .xlsx 생성

## 소스에서 빌드

```bash
# 클론
git clone https://github.com/jljm/jljm-phonesync.git
cd jljm-phonesync

# 안드로이드
cd apps/android_provider
flutter pub get
flutter build apk --release

# 데스크톱 (macOS)
cd apps/desktop_client
flutter pub get
flutter build macos --release

# 데스크톱 (Windows)
flutter build windows --release
```

## FAQ

**Q: 왜 안드로이드 앱이 서버이고 데스크톱이 아닌가요?**

모바일 네트워크와 방화벽 때문에 데스크톱으로의 인바운드 연결이 불안정합니다. 안드로이드에서 mDNS로 서버를 광고하면 데스크톱이 항상 폰을 찾아 연결할 수 있습니다.

**Q: 내 데이터는 안전한가요?**

데이터는 절대 로컬 네트워크를 벗어나지 않습니다. 연결은 자체 서명 인증서로 TLS 암호화됩니다. PIN이 있어야만 데스크톱이 연결할 수 있습니다.

**Q: 왜 엑셀 형식인가요?**

엑셀(.xlsx)은 어디서나 열 수 있고, 오프라인에서 작동하며, 원하는 대로 정렬/필터/검색할 수 있습니다. 독점 형식에 종속되지 않습니다.

**Q: 증분 내보내기가 가능한가요?**

네. 날짜 필터를 사용해 마지막 내보내기 이후의 문자/통화만 내보낼 수 있습니다.

---

<div align="center">

**PhoneSync** — 내 데이터. 내 네트워크. 내 파일.

</div>
